{% extends 'base.html' %}


{% block header %}Manage Website{% endblock %}

{% block content %}
{% from 'bootstrap/form.html' import render_form %}

    <section id="database_status">
        <div class="text-center">
            <div class="database-status bar-rounded">
                <div class="bold">
                    Total # of Tables
                </div>
                {{database_status['count']}}
            </div>

            <div class="database-status bar-rounded">
                <div class="bold">
                    Total # of Rows
                </div>
                {{database_status['total_rows']}}
            </div>

            <div class="database-status bar-rounded">
                <div class="bold">
                    Row Limit
                </div>
                10,000
            </div>
        </div>

        <br>
        <div>
            <table class="center">
                <tr>
                    <th>Table Name</th>
                    <th>Row Count</th>
                    <th>Row Limit</th>
                </tr>
                {% for one_table_name in database_status['tables_details'] %}
                <tr>
                    <td>{{one_table_name}} </td>
                    {% set row_count = database_status['tables_details'][one_table_name]['count']  %}
                    {% set row_limit = database_status['tables_details'][one_table_name]['limit']  %}
                    <td>{{row_count}}</td>
                    {% if row_limit > 0 %}
                    <td>{{row_limit}}</td>
                    {% else %}
                    <td>No Limit</td>
                    {% endif %}


                </tr>
                {%endfor%}


            </table>
        </div>

    </section>

    <section id="histories">
        <h3 class="text-center bold">Histories</h3>
        <table class="center">
            <tr>
                <th>Path</th>
                <th>Method</th>
                <th>Status Code</th>
                <th>Response Time</th>
                <th>Remote Address</th>
                <th>Timestamp</th>
            </tr>
            <!--  [{}, {}, {}]-->
            {% for one_history in website_histories %}
            <tr>
                <td>{{one_history['path']}}</td>
                <td>{{one_history['method']}}</td>
                <td>{{one_history['status_code']}}</td>
                <td>{{one_history['response_time']}} ms</td>
                <td>{{one_history['remote_address']}}</td>
                <td>
                    <small class="timestamp">
                        {{moment(one_history['timestamp']).format('LLL')}}
                    </small>
                </td>
            </tr>
            {% endfor %}
        </table>

    </section>


{% endblock %}
